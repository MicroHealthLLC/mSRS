(function(){(function(e){"object"==typeof exports&&"object"==typeof module?e(require("jquery"),require("d3")):"function"==typeof define&&define.amd?define(["jquery","d3"],e):e(jQuery,d3)})(function(y,g){return y.pivotUtilities.d3_renderers={Treemap:function(e,t){var a,n,i,r,u,l,d,o,c,h,f,s,p;for(i={localeStrings:{},d3:{width:function(){return y(window).width()/1.4},height:function(){return y(window).height()/1.4}}},t=y.extend(i,t),o=y("<div>").css({width:"100%",height:"100%"}),h={name:"All",children:[]},a=function(e,t,n){var i,r,u,l,d,o;if(0!==t.length){for(null==e.children&&(e.children=[]),o=t.shift(),r=0,u=(d=e.children).length;r<u;r++)if((i=d[r]).name===o)return void a(i,t,n);return a(l={name:o},t,n),e.children.push(l)}e.value=n},u=0,l=(d=e.getRowKeys()).length;u<l;u++)c=d[u],null!=(s=e.getAggregator(c,[]).value())&&a(h,c,s);return n=g.scale.category10(),p=t.d3.width(),r=t.d3.height(),f=g.layout.treemap().size([p,r]).sticky(!0).value(function(e){return e.size}),g.select(o[0]).append("div").style("position","relative").style("width",p+"px").style("height",r+"px").datum(h).selectAll(".node").data(f.padding([15,0,0,0]).value(function(e){return e.value}).nodes).enter().append("div").attr("class","node").style("background",function(e){return null!=e.children?"lightgrey":n(e.name)}).text(function(e){return e.name}).call(function(){this.style("left",function(e){return e.x+"px"}).style("top",function(e){return e.y+"px"}).style("width",function(e){return Math.max(0,e.dx-1)+"px"}).style("height",function(e){return Math.max(0,e.dy-1)+"px"})}),o}}})}).call(this);