(function(){(function(t){"object"==typeof exports&&"object"==typeof module?t(require("jquery"),require("c3")):"function"==typeof define&&define.amd?define(["jquery","c3"],t):t(jQuery,c3)})(function(ot,lt){var t;return t=function(at){return null==at&&(at={}),function(t,e){var n,r,a,o,l,i,c,s,u,h,g,p,d,f,y,x,v,b,j,z,m,w,k,A,C,S,q,B,H,_,F,K,T,L,N,Q,R,U,W,D,E,G,I,J,M,O,P,V,X,Y,Z,$,tt,et,nt,rt;if(x={localeStrings:{vs:"vs",by:"by"},c3:{}},null==(a=(e=ot.extend(!0,{},x,e)).c3).size&&(a.size={}),null==(o=e.c3.size).width&&(o.width=window.innerWidth/1.4),null==(l=e.c3.size).height&&(l.height=window.innerHeight/1.4-50),null==at.type&&(at.type="line"),null==at.horizontal&&(at.horizontal=!1),null==at.stacked&&(at.stacked=!1),0===(O=t.getRowKeys()).length&&O.push([]),0===(d=t.getColKeys()).length&&d.push([]),w=function(){var t,e,n;for(n=[],t=0,e=d.length;t<e;t++)z=d[t],n.push(z.join("-"));return n}(),G=0,b=t.aggregatorName,t.valAttrs.length&&(b+="("+t.valAttrs.join(", ")+")"),"scatter"===at.type)for(V={x:{},y:{},t:{}},$=null!=(Q=(r=t.rowAttrs.concat(t.colAttrs))[0])?Q:"",m=null!=(R=r[1])?R:"",j=r.slice(2).join("-"),Z=$,""!==m&&(Z+=" "+e.localeStrings.vs+" "+m),""!==j&&(Z+=" "+e.localeStrings.by+" "+j),k=0,q=O.length;k<q;k++)for(M=O[k],A=0,B=d.length;A<B;A++)p=d[A],null!=(n=t.getAggregator(M,p)).value()&&(""===(X=(et=M.concat(p)).slice(2).join("-"))&&(X="series"),null==(i=V.x)[X]&&(i[X]=[]),null==(c=V.y)[X]&&(c[X]=[]),null==(s=V.t)[X]&&(s[X]=[]),V.y[X].push(null!=(U=et[0])?U:0),V.x[X].push(null!=(W=et[1])?W:0),V.t[X].push(n.value()));else{for(C=T=0,H=w.length;C<H;C++)T+=(nt=w[C]).length;for(50<T&&(G=45),f=[],S=0,_=O.length;S<_;S++){for(I=[""===(J=(M=O[S]).join("-"))?b:J],K=0,F=d.length;K<F;K++)p=d[K],tt=parseFloat(t.getAggregator(M,p).value()),I.push(isFinite(tt)?tt:null);f.push(I)}$=b,at.horizontal?(m=t.rowAttrs.join("-"),j=t.colAttrs.join("-")):(m=t.colAttrs.join("-"),j=t.rowAttrs.join("-")),Z=b,""!==m&&(Z+=" "+e.localeStrings.vs+" "+m),""!==j&&(Z+=" "+e.localeStrings.by+" "+j)}if((Y=ot("<p>",{style:"text-align: center; font-weight: bold"})).text(Z),v=t.getAggregator([],[]).format,N={axis:{rotated:at.horizontal,y:{label:$,tick:{}},x:{label:m,tick:{rotate:G,multiline:!1}}},data:{type:at.type,order:null},tooltip:{grouped:!1},color:{pattern:["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"]}},N=ot.extend(!0,{},N,e.c3),"scatter"===at.type){for(P in rt={},L=0,y=[],V.x)L+=1,rt[P]=P+"_x",y.push([P+"_x"].concat(V.x[P])),y.push([P].concat(V.y[P]));N.data.xs=rt,N.data.columns=y,N.axis.x.tick={fit:!1},1===L&&(N.legend={show:!1}),N.tooltip.format={title:function(){return b},name:function(){return""},value:function(t,e,n,r){return v(V.t[n][r])}}}else N.axis.x.type="category",null==(u=N.axis.y.tick).format&&(u.format=function(t){return v(t)}),N.tooltip.format={value:function(t){return v(t)}},at.horizontal?(1===(g=function(){var t,e,n;for(n=[],e=0,t=f.length;e<t;e++)h=f[e],n.push(h.shift());return n}()).length&&g[0]===b&&(g=[""]),N.axis.x.categories=g,1===w.length&&""===w[0]&&(w=[b]),f.unshift(w),N.data.rows=f):(N.axis.x.categories=w,N.data.columns=f);return at.stacked&&(N.data.groups=at.horizontal?[function(){var t,e,n;for(n=[],e=0,t=d.length;e<t;e++)nt=d[e],n.push(nt.join("-"));return n}()]:[function(){var t,e,n;for(n=[],e=0,t=O.length;e<t;e++)nt=O[e],n.push(nt.join("-"));return n}()]),D=ot("<div>",{style:"display:none;"}).appendTo(ot("body")),E=ot("<div>").appendTo(D),N.bindto=E[0],lt.generate(N),E.detach(),D.remove(),ot("<div>").append(Y,E)}},ot.pivotUtilities.c3_renderers={"Horizontal Bar Chart":t({type:"bar",horizontal:!0}),"Horizontal Stacked Bar Chart":t({type:"bar",stacked:!0,horizontal:!0}),"Bar Chart":t({type:"bar"}),"Stacked Bar Chart":t({type:"bar",stacked:!0}),"Line Chart":t(),"Area Chart":t({type:"area",stacked:!0}),"Scatter Chart":t({type:"scatter"})}})}).call(this);