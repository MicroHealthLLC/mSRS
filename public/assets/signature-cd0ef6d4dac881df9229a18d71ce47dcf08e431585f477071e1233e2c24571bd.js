!function(){function v(t){for(var e,i,n=t.css("color"),s=(t=t[0],!1);t&&!i&&!s;){try{e=$(t).css("background-color")}catch(r){e="transparent"}"transparent"!==e&&"rgba(0, 0, 0, 0)"!==e&&(i=e),s=t.body,t=t.parentNode}var o,a;t=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/,s=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/;return e=void 0,(e=n.match(t))?o={r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}:(e=n.match(s))&&(o={r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}),i?(e=void 0,(e=i.match(t))?a={r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}:(e=i.match(s))&&(a={r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)})):a=o&&127<Math.max.apply(null,[o.r,o.g,o.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255},e=function(t){return"rgb("+[t.r,t.g,t.b].join(", ")+")"},o&&a?(t=Math.max.apply(null,[o.r,o.g,o.b]),o=Math.max.apply(null,[a.r,a.g,a.b]),o={r:o=Math.round(o+-.75*(o-t)),g:o,b:o}):o?(t=1,127<(o=Math.max.apply(null,[o.r,o.g,o.b]))&&(t=-1),o={r:o=Math.round(o+96*t),g:o,b:o}):o={r:191,g:191,b:191},{color:n,"background-color":a?e(a):i,"decor-color":e(o)}}function p(t,e){this.x=t,this.y=e,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var n=function(t){return Math.round(t/Math.abs(t))};this.resizeTo=function(t){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=t,this.y=t*n(this.y);else if(0===this.y)this._length=t,this.x=t*n(this.x);else{var e=Math.abs(this.y/this.x),i=Math.sqrt(Math.pow(t,2)/(1+Math.pow(e,2)));e=e*i;this._length=t,this.x=i*n(this.x),this.y=e*n(this.y)}return this},this.angleTo=function(t){var e=this.getLength()*t.getLength();return 0===e?0:Math.acos(Math.min(Math.max((this.x*t.x+this.y*t.y)/e,-1),1))/Math.PI}}function y(t,e){this.x=t,this.y=e,this.getVectorToCoordinates=function(t,e){return new p(t-this.x,e-this.y)},this.getVectorFromCoordinates=function(t,e){return this.getVectorToCoordinates(t,e).reverse()},this.getVectorToPoint=function(t){return new p(t.x-this.x,t.y-this.y)},this.getVectorFromPoint=function(t){return this.getVectorToPoint(t).reverse()}}function f(t,e,i,n,s){if(this.data=t,this.context=e,t.length)for(var o,a,r=t.length,h=0;h<r;h++){a=(o=t[h]).x.length,i.call(e,o);for(var u=1;u<a;u++)n.call(e,o,u);s.call(e,o)}this.changed=function(){},this.startStrokeFn=i,this.addToStrokeFn=n,this.endStrokeFn=s,this.inStroke=!1,this._stroke=this._lastPoint=null,this.startStroke=function(t){if(t&&"number"==typeof t.x&&"number"==typeof t.y){this._stroke={x:[t.x],y:[t.y]},this.data.push(this._stroke),this._lastPoint=t,this.inStroke=!0;var e=this._stroke,i=this.startStrokeFn,n=this.context;return setTimeout(function(){i.call(n,e)},3),t}return null},this.addToStroke=function(t){if(this.inStroke&&"number"==typeof t.x&&"number"==typeof t.y&&4<Math.abs(t.x-this._lastPoint.x)+Math.abs(t.y-this._lastPoint.y)){var e=this._stroke.x.length;this._stroke.x.push(t.x),this._stroke.y.push(t.y),this._lastPoint=t;var i=this._stroke,n=this.addToStrokeFn,s=this.context;return setTimeout(function(){n.call(s,i,e)},3),t}return null},this.endStroke=function(){var t=this.inStroke;if(this.inStroke=!1,this._lastPoint=null,t){var e=this._stroke,i=this.endStrokeFn,n=this.context,s=this.changed;return setTimeout(function(){i.call(n,e),s.call(n)},3),!0}return null}}function n(t,e,i){var n=this.$parent=$(t);t=this.eventTokens={};this.events=new x(this);var l=$.fn[m]("globalEvents"),s={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};for(var o in $.extend(s,v(n)),e&&$.extend(s,e),this.settings=s,i)i.hasOwnProperty(o)&&i[o].call(this,o);this.events.publish(m+".initializing"),this.$controlbarUpper=$('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(n),this.isCanvasEmulator=!1,i=this.canvas=this.initializeCanvas(s),e=$(i),this.$controlbarLower=$('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(n),this.canvasContext=i.getContext("2d"),e.data(m+".this",this),n=(n=s.lineWidth)?n:Math.max(Math.round(i.width/400),2),s.lineWidth=n,this.lineCurveThreshold=3*s.lineWidth,s.cssclass&&""!=$.trim(s.cssclass)&&e.addClass(s.cssclass),this.fatFingerCompensation=0;var a=(n=function(i){var n,s,o=function(t){return t=t.changedTouches&&0<t.changedTouches.length?t.changedTouches[0]:t,new y(Math.round(t.pageX+n),Math.round(t.pageY+s)+i.fatFingerCompensation)},a=new w(750,function(){i.dataEngine.endStroke()});return this.drawEndHandler=function(t){try{t.preventDefault()}catch(s){}a.clear(),i.dataEngine.endStroke()},this.drawStartHandler=function(t){t.preventDefault();var e=$(i.canvas).offset();n=-1*e.left,s=-1*e.top,i.dataEngine.startStroke(o(t)),a.kick()},this.drawMoveHandler=function(t){t.preventDefault(),i.dataEngine.inStroke&&(i.dataEngine.addToStroke(o(t)),a.kick())},this}.call({},this)).drawEndHandler,r=n.drawStartHandler,h=n.drawMoveHandler,u=this.canvas;e=$(u);this.isCanvasEmulator?(e.bind("mousemove."+m,h),e.bind("mouseup."+m,a),e.bind("mousedown."+m,r)):(u.ontouchstart=function(t){u.onmousedown=void 0,u.onmouseup=void 0,u.onmousemove=void 0,this.fatFingerCompensation=s.minFatFingerCompensation&&-3*s.lineWidth>s.minFatFingerCompensation?-3*s.lineWidth:s.minFatFingerCompensation,r(t),u.ontouchend=a,u.ontouchstart=r,u.ontouchmove=h},u.onmousedown=function(t){u.ontouchstart=void 0,u.ontouchend=void 0,u.ontouchmove=void 0,r(t),u.onmousedown=r,u.onmouseup=a,u.onmousemove=h}),t[m+".windowmouseup"]=l.subscribe(m+".windowmouseup",n.drawEndHandler),this.events.publish(m+".attachingEventHandlers");var c,d,f,p=this,g=(t=s.width.toString(10),m);return"ratio"!==t&&"%"!==t.split("")[t.length-1]||(this.eventTokens[g+".parentresized"]=l.subscribe(g+".parentresized",(c=this.eventTokens,d=this.$parent,f=this.$parent.width(),this.canvas.width,this.canvas.height,function(){if((h=d.width())!==f){for(var t in c)c.hasOwnProperty(t)&&(l.unsubscribe(c[t]),delete c[t]);var e=p.settings;for(t in p.$parent.children().remove(),p)p.hasOwnProperty(t)&&delete p[t];t=e.data;var i,n,s,o,a,r,h=1*h/f,u=[];for(n=0,s=t.length;n<s;n++){for(i={x:[],y:[]},o=0,a=(r=t[n]).x.length;o<a;o++)i.x.push(r.x[o]*h),i.y.push(r.y[o]*h);u.push(i)}e.data=u,d[g](e)}}))),this.resetCanvas(s.data),this.events.publish(m+".initialized"),this}var m="jSignature",w=function(t,e){var i;return this.kick=function(){clearTimeout(i),i=setTimeout(e,t)},this.clear=function(){clearTimeout(i)},this},x=function(t){this.topics={},this.context=t||this,this.publish=function(t,e,i,n){if(this.topics[t]){var s,o,a,r,h=this.topics[t],u=Array.prototype.slice.call(arguments,1),l=[];for(o=0,a=h.length;o<a;o++)s=(r=h[o])[0],r[1]&&(r[0]=function(){},l.push(o)),s.apply(this.context,u);for(o=0,a=l.length;o<a;o++)h.splice(l[o],1)}},this.subscribe=function(t,e,i){return this.topics[t]?this.topics[t].push([e,i]):this.topics[t]=[[e,i]],{topic:t,callback:e}},this.unsubscribe=function(t){if(this.topics[t.topic])for(var e=this.topics[t.topic],i=0,n=e.length;i<n;i++)e[i][0]===t.callback&&e.splice(i,1)}},g=function(t){var e=this.canvasContext,i=t.x[0],n=(t=t.y[0],this.settings.lineWidth),s=e.fillStyle;e.fillStyle=e.strokeStyle,e.fillRect(i+n/-2,t+n/-2,n,n),e.fillStyle=s},b=function(t,e){var i,n=new y(t.x[e-1],t.y[e-1]),s=new y(t.x[e],t.y[e]),o=n.getVectorToPoint(s);if(1<e&&(l=(f=new y(t.x[e-2],t.y[e-2])).getVectorToPoint(n)).getLength()>this.lineCurveThreshold){i=2<e?new y(t.x[e-3],t.y[e-3]).getVectorToPoint(f):new p(0,0);var a=.35*l.getLength(),r=l.angleTo(i.reverse()),h=o.angleTo(l.reverse());i=new p(i.x+l.x,i.y+l.y).resizeTo(Math.max(.05,r)*a);var u=new p(l.x+o.x,l.y+o.y).reverse().resizeTo(Math.max(.05,h)*a),l=this.canvasContext,c=(a=f.x,h=f.y,r=n.x,n.y),d=f.x+i.x,f=f.y+i.y;i=n.x+u.x,u=n.y+u.y,l.beginPath(),l.moveTo(a,h),l.bezierCurveTo(d,f,i,u,r,c),l.stroke()}o.getLength()<=this.lineCurveThreshold&&(o=this.canvasContext,f=n.x,n=n.y,i=s.x,s=s.y,o.beginPath(),o.moveTo(f,n),o.lineTo(i,s),o.stroke())},_=function(t){if(0<(s=t.x.length-1)){var e=new y(t.x[s],t.y[s]);if((n=(h=new y(t.x[s-1],t.y[s-1])).getVectorToPoint(e)).getLength()>this.lineCurveThreshold){if(1<s){var i=new p((t=new y(t.x[s-2],t.y[s-2]).getVectorToPoint(h)).x+n.x,t.y+n.y).resizeTo(n.getLength()/2),n=this.canvasContext,s=(t=h.x,h.y),o=e.x,a=e.y,r=h.x+i.x,h=h.y+i.y;i=e.x,e=e.y;n.beginPath(),n.moveTo(t,s),n.bezierCurveTo(r,h,i,e,o,a)}else n=this.canvasContext,t=h.x,h=h.y,s=e.x,e=e.y,n.beginPath(),n.moveTo(t,h),n.lineTo(s,e);n.stroke()}}};n.prototype.resetCanvas=function(t){var e=this.canvas,i=this.settings,n=this.canvasContext,s=this.isCanvasEmulator,o=e.width,a=e.height;n.clearRect(0,0,o+30,a+30),n.shadowColor=n.fillStyle=i["background-color"],s&&n.fillRect(0,0,o+30,a+30),n.lineWidth=Math.ceil(parseInt(i.lineWidth,10)),n.lineCap=n.lineJoin="round",n.strokeStyle=i["decor-color"],n.shadowOffsetX=0,n.shadowOffsetY=0;var r=Math.round(a/5),h=1.5*r,u=a-r;o-=1.5*r,a-=r;n.beginPath(),n.moveTo(h,u),n.lineTo(o,a),n.stroke(),n.strokeStyle=i.color,s||(n.shadowColor=n.strokeStyle,n.shadowOffsetX=.5*n.lineWidth,n.shadowOffsetY=-.6*n.lineWidth,n.shadowBlur=0),t||(t=[]),n=this.dataEngine=new f(t,this,g,b,_),i.data=t,$(e).data(m+".data",t).data(m+".settings",i);var l=this.$parent,c=this.events,d=m;return n.changed=function(){c.publish(d+".change"),l.trigger("change")},n.changed(),!0},n.prototype.initializeCanvas=function(t){var e=document.createElement("canvas"),i=$(e);if(t.width===t.height&&"ratio"===t.height&&(t.width="100%"),i.css("margin",0).css("padding",0).css("border","none").css("height","ratio"!==t.height&&t.height?t.height.toString(10):1).css("width","ratio"!==t.width&&t.width?t.width.toString(10):1),i.appendTo(this.$parent),"ratio"===t.height?i.css("height",Math.round(i.width()/t.sizeRatio)):"ratio"===t.width&&i.css("width",Math.round(i.height()*t.sizeRatio)),i.addClass(m),e.width=i.width(),e.height=i.height(),(t=e).getContext)t=!1;else{var n=(i=t.ownerDocument.parentWindow).FlashCanvas?t.ownerDocument.parentWindow.FlashCanvas:"undefined"==typeof FlashCanvas?void 0:FlashCanvas;if(!n)throw Error("Canvas element does not support 2d context. jSignature cannot proceed.");if(t=n.initElement(t),n=1,i&&i.screen&&i.screen.deviceXDPI&&i.screen.logicalXDPI&&(n=1*i.screen.deviceXDPI/i.screen.logicalXDPI),1!==n)try{$(t).children("object").get(0).resize(Math.ceil(t.width*n),Math.ceil(t.height*n)),t.getContext("2d").scale(n,n)}catch(o){}t=!0}return this.isCanvasEmulator=t,e.onselectstart=function(t){return t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),!1},e};var t,e=window,i=function(t,e){var i=new Image,n=this;i.onload=function(){n.getContext("2d").drawImage(i,0,0,i.width<n.width?i.width:n.width,i.height<n.height?i.height:n.height)},i.src="data:"+e+","+t},s=function(t){return this.find("canvas."+m).add(this.filter("canvas."+m)).data(m+".this").resetCanvas(t),this},o=function(t,e){if(void 0!==e||"string"!=typeof t||"data:"!==t.substr(0,5)||(e=t.slice(5).split(",")[0])!==(t=t.slice(6+e.length))){var i,n=this.find("canvas."+m).add(this.filter("canvas."+m));if(!c.hasOwnProperty(e))throw Error(m+" is unable to find import plugin with for format '"+String(e)+"'");return 0!==n.length&&c[e].call(n[0],t,e,(i=n.data(m+".this"),function(){return i.resetCanvas.apply(i,arguments)})),this}},r=new x,a=m,h=function(){r.publish(a+".parentresized")};$(e).bind("resize."+a,function(){t&&clearTimeout(t),t=setTimeout(h,500)}).bind("mouseup."+a,function(){r.publish(a+".windowmouseup")});var u={},l={"default":function(){return this.toDataURL()},"native":function(t){return t},image:function(){var t=this.toDataURL();if("string"==typeof t&&4<t.length&&"data:"===t.slice(0,5)&&-1!==t.indexOf(",")){var e=t.indexOf(",");return[t.slice(5,e),t.substr(e+1)]}return[]}},c={"native":function(t,e,i){i(t)},image:i,"image/png;base64":i,"image/jpeg;base64":i,"image/jpg;base64":i},d={"export":l,"import":c,instance:u},C={init:function(i){return this.each(function(){var t,e=!1;for(t=this.parentNode;t&&!e;)e=t.body,t=t.parentNode;!e||new n(this,i,u)})},getSettings:function(){return this.find("canvas."+m).add(this.filter("canvas."+m)).data(m+".this").settings},clear:s,reset:s,addPlugin:function(t,e,i){return d.hasOwnProperty(t)&&(d[t][e]=i),this},listPlugins:function(t){var e=[];if(d.hasOwnProperty(t)){var i;t=d[t];for(i in t)t.hasOwnProperty(i)&&e.push(i)}return e},getData:function(t){var e=this.find("canvas."+m).add(this.filter("canvas."+m));if(void 0===t&&(t="default"),0!==e.length&&l.hasOwnProperty(t))return l[t].call(e.get(0),e.data(m+".data"))},importData:o,setData:o,globalEvents:function(){return r},events:function(){return this.find("canvas."+m).add(this.filter("canvas."+m)).data(m+".this").events}};$.fn[m]=function(t){return t&&"object"!=typeof t?"string"==typeof t&&C[t]?C[t].apply(this,Array.prototype.slice.call(arguments,1)):void $.error("Method "+String(t)+" does not exist on jQuery."+m):C.init.apply(this,arguments)}}(),$.fn.jSignature("addPlugin","instance","UndoButton",function(o){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[o]){var t=this.settings[o];"function"!=typeof t&&(t=function(){var t=$('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),e=t.width();return t.css("left",Math.round((this.canvas.width-e)/2)),e!==t.width()&&t.width(e),t});var e=t.call(this),i=this;i.events.subscribe("jSignature.change",function(){i.dataEngine.data.length?e.show():e.hide()});var n=this,s=(this.events.topics.hasOwnProperty("jSignature.undo")?o:"jSignature")+".undo";e.bind("click",function(){n.events.publish(s)}),n.events.subscribe(s,function(){var t=n.dataEngine.data;t.length&&(t.pop(),n.resetCanvas(t))})}})}),function(){for(var h={},u={},l=(i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split("")).length/2,t=l-1;-1<t;t--)h[i[t]]=i[t+l],u[i[t+l]]=i[t];var c=function(t){for(var e=(t=t.split("")).length,i=1;i<e;i++)t[i]=h[t[i]];return t.join("")},o=function(t){for(var e,i,n=[],s=0,o=1,a=t.length,r=0;r<a;r++)i=(e=Math.round(t[r]))-s,s=e,i<0&&0<o?(o=-1,n.push("Z")):0<i&&o<0&&(o=1,n.push("Y")),e=Math.abs(i),l<=e?n.push(c(e.toString(l))):n.push(e.toString(l));return n.join("")},s=function(t){for(var e,i=[],n=(t=t.split("")).length,s=1,o=[],a=0,r=0;r<n;r++)(e=t[r])in h||"Z"===e||"Y"===e?(0!==o.length&&(o=parseInt(o.join(""),l)*s+a,i.push(o),a=o),"Z"===e?(s=-1,o=[]):"Y"===e?(s=1,o=[]):o=[e]):o.push(u[e]);return i.push(parseInt(o.join(""),l)*s+a),i},e=function(t){for(var e,i=[],n=t.length,s=0;s<n;s++)e=t[s],i.push(o(e.x)),i.push(o(e.y));return i.join("_")},n=function(t){for(var e=[],i=(t=t.split("_")).length/2,n=0;n<i;n++)e.push({x:s(t[2*n]),y:s(t[2*n+1])});return e},i=function(t){return["image/jsignature;base30",e(t)]};t=function(t,e,i){"string"==typeof t&&("image/jsignature;base30"===t.substring(0,23).toLowerCase()&&(t=t.substring(24)),i(n(t)))};if(null==this.jQuery)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");var a=this.jQuery.fn.jSignature;a("addPlugin","export","base30",i),a("addPlugin","export","image/jsignature;base30",i),a("addPlugin","import","base30",t),a("addPlugin","import","image/jsignature;base30",t),this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:c,compressstrokeleg:o,uncompressstrokeleg:s,compressstrokes:e,uncompressstrokes:n,charmap:h})}.call("undefined"!=typeof window?window:this),function(){function a(t,e){this.x=t,this.y=e,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var n=function(t){return Math.round(t/Math.abs(t))};this.resizeTo=function(t){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=t,this.y=t*n(this.y);else if(0===this.y)this._length=t,this.x=t*n(this.x);else{var e=Math.abs(this.y/this.x),i=Math.sqrt(Math.pow(t,2)/(1+Math.pow(e,2)));e=e*i;this._length=t,this.x=i*n(this.x),this.y=e*n(this.y)}return this},this.angleTo=function(t){var e=this.getLength()*t.getLength();return 0===e?0:Math.acos(Math.min(Math.max((this.x*t.x+this.y*t.y)/e,-1),1))/Math.PI}}function r(t,e){this.x=t,this.y=e,this.getVectorToCoordinates=function(t,e){return new a(t-this.x,e-this.y)},this.getVectorFromCoordinates=function(t,e){return this.getVectorToCoordinates(t,e).reverse()},this.getVectorToPoint=function(t){return new a(t.x-this.x,t.y-this.y)},this.getVectorFromPoint=function(t){return this.getVectorToPoint(t).reverse()}}function h(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}function s(t,e,i){e+=1;var n=new r(t.x[e-1],t.y[e-1]),s=new r(t.x[e],t.y[e]),o=(s=n.getVectorToPoint(s),new r(t.x[e-2],t.y[e-2]));return(n=o.getVectorToPoint(n)).getLength()>i?(i=2<e?new r(t.x[e-3],t.y[e-3]).getVectorToPoint(o):new a(0,0),t=.35*n.getLength(),o=n.angleTo(i.reverse()),e=s.angleTo(n.reverse()),i=new a(i.x+n.x,i.y+n.y).resizeTo(Math.max(.05,o)*t),s=new a(n.x+s.x,n.y+s.y).reverse().resizeTo(Math.max(.05,e)*t),s=new a(n.x+s.x,n.y+s.y),["c",h(i.x,2),h(i.y,2),h(s.x,2),h(s.y,2),h(n.x,2),h(n.y,2)]):["l",h(n.x,2),h(n.y,2)]}function o(t,e){var i=t.x.length-1,n=new r(t.x[i],t.y[i]);n=(s=new r(t.x[i-1],t.y[i-1])).getVectorToPoint(n);if(1<i&&n.getLength()>e){i=new r(t.x[i-2],t.y[i-2]).getVectorToPoint(s);var s=n.angleTo(i.reverse()),o=.35*n.getLength();return["c",h((i=new a(i.x+n.x,i.y+n.y).resizeTo(Math.max(.05,s)*o)).x,2),h(i.y,2),h(n.x,2),h(n.y,2),h(n.x,2),h(n.y,2)]}return["l",h(n.x,2),h(n.y,2)]}function d(t,e,i){e=["M",h(t.x[0]-e,2),h(t.y[0]-i,2)],i=1;for(var n=t.x.length-1;i<n;i++)e.push.apply(e,s(t,i,1));return 0<n?e.push.apply(e,o(t,i,1)):0===n&&e.push.apply(e,["l",1,1]),e.join(" ")}function e(t){var e,i,n=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],s=t.length,o=[],a=[],r=i=e=0,h=0,u=[];if(0!==s){for(e=0;e<s;e++){h=[],i={x:[],y:[]};var l=void 0,c=void 0;for(l=0,c=(r=t[e]).x.length;l<c;l++)h.push({x:r.x[l],y:r.y[l]});for(l=0,c=(h=simplify(h,.7,!0)).length;l<c;l++)i.x.push(h[l].x),i.y.push(h[l].y);u.push(i),o=o.concat(i.x),a=a.concat(i.y)}t=Math.min.apply(null,o)-1,s=Math.max.apply(null,o)+1,r=t<0?0:t,h=(o=Math.min.apply(null,a)-1)<0?0:o,e=s-t,i=(a=Math.max.apply(null,a)+1)-o}for(n.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+e.toString()+'" height="'+i.toString()+'">'),e=0,s=u.length;e<s;e++)i=u[e],n.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+d(i,r,h)+'"/>');return n.push("</svg>"),n.join("")}function t(t){return[l,e(t)]}function i(t){return[c,u(e(t))]}var n=window;if(("undefined"!=typeof exports?exports:n).simplify=function(t,e,i){if(e=void 0!==e?e*e:1,!i){var n,s=t.length,o=[h=t[0]];for(i=1;i<s;i++){var a=(n=t[i]).x-h.x,r=n.y-h.y;e<a*a+r*r&&(o.push(n),h=n)}h!==n&&o.push(n),t=o}o=(i=(n=t).length)-1;var h,u,l,c=[],d=[],f=[];for((s=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(i))[h=0]=s[o]=1;o;){for(r=0,a=h+1;a<o;a++){u=n[a];var p=n[h],g=n[o],v=p.x,y=p.y,m=(p=g.x-v,g.y-y),w=void 0;0===p&&0===m||(1<(w=((u.x-v)*p+(u.y-y)*m)/(p*p+m*m))?(v=g.x,y=g.y):0<w&&(v+=p*w,y+=m*w)),r<(u=(p=u.x-v)*p+(m=u.y-y)*m)&&(l=a,r=u)}e<r&&(s[l]=1,c.push(h),d.push(l),c.push(l),d.push(o)),h=c.pop(),o=d.pop()}for(a=0;a<i;a++)s[a]&&f.push(n[a]);return t=f},"function"!=typeof u)var u=function(t){var e,i,n,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),a=0,r=0,h="";for(h=[];e=(s=(e=t.charCodeAt(a++))<<16|(i=t.charCodeAt(a++))<<8|(n=t.charCodeAt(a++)))>>18&63,i=s>>12&63,n=s>>6&63,s&=63,h[r++]=o[e]+o[i]+o[n]+o[s],a<t.length;);return h=h.join(""),((t=t.length%3)?h.slice(0,t-3):h)+"===".slice(t||3)};var l="image/svg+xml",c="image/svg+xml;base64";if("undefined"==typeof $)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");(n=$.fn.jSignature)("addPlugin","export","svg",t),n("addPlugin","export",l,t),n("addPlugin","export","svgbase64",i),n("addPlugin","export",c,i)}(),function(T){!function(){function v(t){for(var e,i,n=t.css("color"),s=(t=t[0],!1);t&&!i&&!s;){try{e=T(t).css("background-color")}catch(r){e="transparent"}"transparent"!==e&&"rgba(0, 0, 0, 0)"!==e&&(i=e),s=t.body,t=t.parentNode}var o,a;t=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/,s=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/;return e=void 0,(e=n.match(t))?o={r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}:(e=n.match(s))&&(o={r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}),i?(e=void 0,(e=i.match(t))?a={r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}:(e=i.match(s))&&(a={r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)})):a=o&&127<Math.max.apply(null,[o.r,o.g,o.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255},e=function(t){return"rgb("+[t.r,t.g,t.b].join(", ")+")"},o&&a?(t=Math.max.apply(null,[o.r,o.g,o.b]),o=Math.max.apply(null,[a.r,a.g,a.b]),o={r:o=Math.round(o+-.75*(o-t)),g:o,b:o}):o?(t=1,127<(o=Math.max.apply(null,[o.r,o.g,o.b]))&&(t=-1),o={r:o=Math.round(o+96*t),g:o,b:o}):o={r:191,g:191,b:191},{color:n,"background-color":a?e(a):i,"decor-color":e(o)}}function p(t,e){this.x=t,this.y=e,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var n=function(t){return Math.round(t/Math.abs(t))};this.resizeTo=function(t){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=t,this.y=t*n(this.y);else if(0===this.y)this._length=t,this.x=t*n(this.x);else{var e=Math.abs(this.y/this.x),i=Math.sqrt(Math.pow(t,2)/(1+Math.pow(e,2)));e=e*i;this._length=t,this.x=i*n(this.x),this.y=e*n(this.y)}return this},this.angleTo=function(t){var e=this.getLength()*t.getLength();return 0===e?0:Math.acos(Math.min(Math.max((this.x*t.x+this.y*t.y)/e,-1),1))/Math.PI}}function y(t,e){this.x=t,this.y=e,this.getVectorToCoordinates=function(t,e){return new p(t-this.x,e-this.y)},this.getVectorFromCoordinates=function(t,e){return this.getVectorToCoordinates(t,e).reverse()},this.getVectorToPoint=function(t){return new p(t.x-this.x,t.y-this.y)},this.getVectorFromPoint=function(t){return this.getVectorToPoint(t).reverse()}}function f(t,e,i,n,s){if(this.data=t,this.context=e,t.length)for(var o,a,r=t.length,h=0;h<r;h++){a=(o=t[h]).x.length,i.call(e,o);for(var u=1;u<a;u++)n.call(e,o,u);s.call(e,o)}this.changed=function(){},this.startStrokeFn=i,this.addToStrokeFn=n,this.endStrokeFn=s,this.inStroke=!1,this._stroke=this._lastPoint=null,this.startStroke=function(t){if(t&&"number"==typeof t.x&&"number"==typeof t.y){this._stroke={x:[t.x],y:[t.y]},this.data.push(this._stroke),this._lastPoint=t,this.inStroke=!0;var e=this._stroke,i=this.startStrokeFn,n=this.context;return setTimeout(function(){i.call(n,e)},3),t}return null},this.addToStroke=function(t){if(this.inStroke&&"number"==typeof t.x&&"number"==typeof t.y&&4<Math.abs(t.x-this._lastPoint.x)+Math.abs(t.y-this._lastPoint.y)){var e=this._stroke.x.length;this._stroke.x.push(t.x),this._stroke.y.push(t.y),this._lastPoint=t;var i=this._stroke,n=this.addToStrokeFn,s=this.context;return setTimeout(function(){n.call(s,i,e)},3),t}return null},this.endStroke=function(){var t=this.inStroke;if(this.inStroke=!1,this._lastPoint=null,t){var e=this._stroke,i=this.endStrokeFn,n=this.context,s=this.changed;return setTimeout(function(){i.call(n,e),s.call(n)},3),!0}return null}}function n(t,e,i){var n=this.$parent=T(t);t=this.eventTokens={};this.events=new x(this);var l=T.fn[m]("globalEvents"),s={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};for(var o in T.extend(s,v(n)),e&&T.extend(s,e),this.settings=s,i)i.hasOwnProperty(o)&&i[o].call(this,o);this.events.publish(m+".initializing"),this.$controlbarUpper=T('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(n),this.isCanvasEmulator=!1,i=this.canvas=this.initializeCanvas(s),e=T(i),this.$controlbarLower=T('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(n),this.canvasContext=i.getContext("2d"),e.data(m+".this",this),n=(n=s.lineWidth)?n:Math.max(Math.round(i.width/400),2),s.lineWidth=n,this.lineCurveThreshold=3*s.lineWidth,s.cssclass&&""!=T.trim(s.cssclass)&&e.addClass(s.cssclass),this.fatFingerCompensation=0;var a=(n=function(i){var n,s,o=function(t){return t=t.changedTouches&&0<t.changedTouches.length?t.changedTouches[0]:t,new y(Math.round(t.pageX+n),Math.round(t.pageY+s)+i.fatFingerCompensation)},a=new w(750,function(){i.dataEngine.endStroke()});return this.drawEndHandler=function(t){try{t.preventDefault()}catch(s){}a.clear(),i.dataEngine.endStroke()},this.drawStartHandler=function(t){t.preventDefault();var e=T(i.canvas).offset();n=-1*e.left,s=-1*e.top,i.dataEngine.startStroke(o(t)),a.kick()},this.drawMoveHandler=function(t){t.preventDefault(),i.dataEngine.inStroke&&(i.dataEngine.addToStroke(o(t)),a.kick())},this}.call({},this)).drawEndHandler,r=n.drawStartHandler,h=n.drawMoveHandler,u=this.canvas;e=T(u);this.isCanvasEmulator?(e.bind("mousemove."+m,h),e.bind("mouseup."+m,a),e.bind("mousedown."+m,r)):(u.ontouchstart=function(t){u.onmousedown=void 0,u.onmouseup=void 0,u.onmousemove=void 0,this.fatFingerCompensation=s.minFatFingerCompensation&&-3*s.lineWidth>s.minFatFingerCompensation?-3*s.lineWidth:s.minFatFingerCompensation,r(t),u.ontouchend=a,u.ontouchstart=r,u.ontouchmove=h},u.onmousedown=function(t){u.ontouchstart=void 0,u.ontouchend=void 0,u.ontouchmove=void 0,r(t),u.onmousedown=r,u.onmouseup=a,u.onmousemove=h}),t[m+".windowmouseup"]=l.subscribe(m+".windowmouseup",n.drawEndHandler),this.events.publish(m+".attachingEventHandlers");var c,d,f,p=this,g=(t=s.width.toString(10),m);return"ratio"!==t&&"%"!==t.split("")[t.length-1]||(this.eventTokens[g+".parentresized"]=l.subscribe(g+".parentresized",(c=this.eventTokens,d=this.$parent,f=this.$parent.width(),this.canvas.width,this.canvas.height,function(){if((h=d.width())!==f){for(var t in c)c.hasOwnProperty(t)&&(l.unsubscribe(c[t]),delete c[t]);var e=p.settings;for(t in p.$parent.children().remove(),p)p.hasOwnProperty(t)&&delete p[t];t=e.data;var i,n,s,o,a,r,h=1*h/f,u=[];for(n=0,s=t.length;n<s;n++){for(i={x:[],y:[]},o=0,a=(r=t[n]).x.length;o<a;o++)i.x.push(r.x[o]*h),i.y.push(r.y[o]*h);u.push(i)}e.data=u,d[g](e)}}))),this.resetCanvas(s.data),this.events.publish(m+".initialized"),this}var m="jSignature",w=function(t,e){var i;return this.kick=function(){clearTimeout(i),i=setTimeout(e,t)},this.clear=function(){clearTimeout(i)},this},x=function(t){this.topics={},this.context=t||this,this.publish=function(t,e,i,n){if(this.topics[t]){var s,o,a,r,h=this.topics[t],u=Array.prototype.slice.call(arguments,1),l=[];for(o=0,a=h.length;o<a;o++)s=(r=h[o])[0],r[1]&&(r[0]=function(){},l.push(o)),s.apply(this.context,u);for(o=0,a=l.length;o<a;o++)h.splice(l[o],1)}},this.subscribe=function(t,e,i){return this.topics[t]?this.topics[t].push([e,i]):this.topics[t]=[[e,i]],{topic:t,callback:e}},this.unsubscribe=function(t){if(this.topics[t.topic])for(var e=this.topics[t.topic],i=0,n=e.length;i<n;i++)e[i][0]===t.callback&&e.splice(i,1)}},g=function(t){var e=this.canvasContext,i=t.x[0],n=(t=t.y[0],this.settings.lineWidth),s=e.fillStyle;e.fillStyle=e.strokeStyle,e.fillRect(i+n/-2,t+n/-2,n,n),e.fillStyle=s},b=function(t,e){var i,n=new y(t.x[e-1],t.y[e-1]),s=new y(t.x[e],t.y[e]),o=n.getVectorToPoint(s);if(1<e&&(l=(f=new y(t.x[e-2],t.y[e-2])).getVectorToPoint(n)).getLength()>this.lineCurveThreshold){i=2<e?new y(t.x[e-3],t.y[e-3]).getVectorToPoint(f):new p(0,0);var a=.35*l.getLength(),r=l.angleTo(i.reverse()),h=o.angleTo(l.reverse());i=new p(i.x+l.x,i.y+l.y).resizeTo(Math.max(.05,r)*a);var u=new p(l.x+o.x,l.y+o.y).reverse().resizeTo(Math.max(.05,h)*a),l=this.canvasContext,c=(a=f.x,h=f.y,r=n.x,n.y),d=f.x+i.x,f=f.y+i.y;i=n.x+u.x,u=n.y+u.y,l.beginPath(),l.moveTo(a,h),l.bezierCurveTo(d,f,i,u,r,c),l.stroke()}o.getLength()<=this.lineCurveThreshold&&(o=this.canvasContext,f=n.x,n=n.y,i=s.x,s=s.y,o.beginPath(),o.moveTo(f,n),o.lineTo(i,s),o.stroke())},_=function(t){if(0<(s=t.x.length-1)){var e=new y(t.x[s],t.y[s]);if((n=(h=new y(t.x[s-1],t.y[s-1])).getVectorToPoint(e)).getLength()>this.lineCurveThreshold){if(1<s){var i=new p((t=new y(t.x[s-2],t.y[s-2]).getVectorToPoint(h)).x+n.x,t.y+n.y).resizeTo(n.getLength()/2),n=this.canvasContext,s=(t=h.x,h.y),o=e.x,a=e.y,r=h.x+i.x,h=h.y+i.y;i=e.x,e=e.y;n.beginPath(),n.moveTo(t,s),n.bezierCurveTo(r,h,i,e,o,a)}else n=this.canvasContext,t=h.x,h=h.y,s=e.x,e=e.y,n.beginPath(),n.moveTo(t,h),n.lineTo(s,e);n.stroke()}}};n.prototype.resetCanvas=function(t){var e=this.canvas,i=this.settings,n=this.canvasContext,s=this.isCanvasEmulator,o=e.width,a=e.height;n.clearRect(0,0,o+30,a+30),n.shadowColor=n.fillStyle=i["background-color"],s&&n.fillRect(0,0,o+30,a+30),n.lineWidth=Math.ceil(parseInt(i.lineWidth,10)),n.lineCap=n.lineJoin="round",n.strokeStyle=i["decor-color"],n.shadowOffsetX=0,n.shadowOffsetY=0;var r=Math.round(a/5),h=1.5*r,u=a-r;o-=1.5*r,a-=r;n.beginPath(),n.moveTo(h,u),n.lineTo(o,a),n.stroke(),n.strokeStyle=i.color,s||(n.shadowColor=n.strokeStyle,n.shadowOffsetX=.5*n.lineWidth,n.shadowOffsetY=-.6*n.lineWidth,n.shadowBlur=0),t||(t=[]),n=this.dataEngine=new f(t,this,g,b,_),i.data=t,T(e).data(m+".data",t).data(m+".settings",i);var l=this.$parent,c=this.events,d=m;return n.changed=function(){c.publish(d+".change"),l.trigger("change")},n.changed(),!0},n.prototype.initializeCanvas=function(t){var e=document.createElement("canvas"),i=T(e);if(t.width===t.height&&"ratio"===t.height&&(t.width="100%"),i.css("margin",0).css("padding",0).css("border","none").css("height","ratio"!==t.height&&t.height?t.height.toString(10):1).css("width","ratio"!==t.width&&t.width?t.width.toString(10):1),i.appendTo(this.$parent),"ratio"===t.height?i.css("height",Math.round(i.width()/t.sizeRatio)):"ratio"===t.width&&i.css("width",Math.round(i.height()*t.sizeRatio)),i.addClass(m),e.width=i.width(),e.height=i.height(),(t=e).getContext)t=!1;else{var n=(i=t.ownerDocument.parentWindow).FlashCanvas?t.ownerDocument.parentWindow.FlashCanvas:"undefined"==typeof FlashCanvas?void 0:FlashCanvas;if(!n)throw Error("Canvas element does not support 2d context. jSignature cannot proceed.");if(t=n.initElement(t),n=1,i&&i.screen&&i.screen.deviceXDPI&&i.screen.logicalXDPI&&(n=1*i.screen.deviceXDPI/i.screen.logicalXDPI),1!==n)try{T(t).children("object").get(0).resize(Math.ceil(t.width*n),Math.ceil(t.height*n)),t.getContext("2d").scale(n,n)}catch(o){}t=!0}return this.isCanvasEmulator=t,e.onselectstart=function(t){return t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),!1},e};var t,e=window,i=function(t,e){var i=new Image,n=this;i.onload=function(){n.getContext("2d").drawImage(i,0,0,i.width<n.width?i.width:n.width,i.height<n.height?i.height:n.height)},i.src="data:"+e+","+t},s=function(t){return this.find("canvas."+m).add(this.filter("canvas."+m)).data(m+".this").resetCanvas(t),this},o=function(t,e){if(void 0!==e||"string"!=typeof t||"data:"!==t.substr(0,5)||(e=t.slice(5).split(",")[0])!==(t=t.slice(6+e.length))){var i,n=this.find("canvas."+m).add(this.filter("canvas."+m));if(!c.hasOwnProperty(e))throw Error(m+" is unable to find import plugin with for format '"+String(e)+"'");return 0!==n.length&&c[e].call(n[0],t,e,(i=n.data(m+".this"),function(){return i.resetCanvas.apply(i,arguments)})),this}},r=new x,a=m,h=function(){r.publish(a+".parentresized")};T(e).bind("resize."+a,function(){t&&clearTimeout(t),t=setTimeout(h,500)}).bind("mouseup."+a,function(){r.publish(a+".windowmouseup")});var u={},l={"default":function(){return this.toDataURL()},"native":function(t){return t},image:function(){var t=this.toDataURL();if("string"==typeof t&&4<t.length&&"data:"===t.slice(0,5)&&-1!==t.indexOf(",")){var e=t.indexOf(",");return[t.slice(5,e),t.substr(e+1)]}return[]}},c={"native":function(t,e,i){i(t)},image:i,"image/png;base64":i,"image/jpeg;base64":i,
"image/jpg;base64":i},d={"export":l,"import":c,instance:u},C={init:function(i){return this.each(function(){var t,e=!1;for(t=this.parentNode;t&&!e;)e=t.body,t=t.parentNode;!e||new n(this,i,u)})},getSettings:function(){return this.find("canvas."+m).add(this.filter("canvas."+m)).data(m+".this").settings},clear:s,reset:s,addPlugin:function(t,e,i){return d.hasOwnProperty(t)&&(d[t][e]=i),this},listPlugins:function(t){var e=[];if(d.hasOwnProperty(t)){var i;t=d[t];for(i in t)t.hasOwnProperty(i)&&e.push(i)}return e},getData:function(t){var e=this.find("canvas."+m).add(this.filter("canvas."+m));if(void 0===t&&(t="default"),0!==e.length&&l.hasOwnProperty(t))return l[t].call(e.get(0),e.data(m+".data"))},importData:o,setData:o,globalEvents:function(){return r},events:function(){return this.find("canvas."+m).add(this.filter("canvas."+m)).data(m+".this").events}};T.fn[m]=function(t){return t&&"object"!=typeof t?"string"==typeof t&&C[t]?C[t].apply(this,Array.prototype.slice.call(arguments,1)):void T.error("Method "+String(t)+" does not exist on jQuery."+m):C.init.apply(this,arguments)}}(),T.fn.jSignature("addPlugin","instance","UndoButton",function(o){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[o]){var t=this.settings[o];"function"!=typeof t&&(t=function(){var t=T('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),e=t.width();return t.css("left",Math.round((this.canvas.width-e)/2)),e!==t.width()&&t.width(e),t});var e=t.call(this),i=this;i.events.subscribe("jSignature.change",function(){i.dataEngine.data.length?e.show():e.hide()});var n=this,s=(this.events.topics.hasOwnProperty("jSignature.undo")?o:"jSignature")+".undo";e.bind("click",function(){n.events.publish(s)}),n.events.subscribe(s,function(){var t=n.dataEngine.data;t.length&&(t.pop(),n.resetCanvas(t))})}})}),function(){for(var h={},u={},l=(i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split("")).length/2,t=l-1;-1<t;t--)h[i[t]]=i[t+l],u[i[t+l]]=i[t];var c=function(t){for(var e=(t=t.split("")).length,i=1;i<e;i++)t[i]=h[t[i]];return t.join("")},o=function(t){for(var e,i,n=[],s=0,o=1,a=t.length,r=0;r<a;r++)i=(e=Math.round(t[r]))-s,s=e,i<0&&0<o?(o=-1,n.push("Z")):0<i&&o<0&&(o=1,n.push("Y")),e=Math.abs(i),l<=e?n.push(c(e.toString(l))):n.push(e.toString(l));return n.join("")},s=function(t){for(var e,i=[],n=(t=t.split("")).length,s=1,o=[],a=0,r=0;r<n;r++)(e=t[r])in h||"Z"===e||"Y"===e?(0!==o.length&&(o=parseInt(o.join(""),l)*s+a,i.push(o),a=o),"Z"===e?(s=-1,o=[]):"Y"===e?(s=1,o=[]):o=[e]):o.push(u[e]);return i.push(parseInt(o.join(""),l)*s+a),i},e=function(t){for(var e,i=[],n=t.length,s=0;s<n;s++)e=t[s],i.push(o(e.x)),i.push(o(e.y));return i.join("_")},n=function(t){for(var e=[],i=(t=t.split("_")).length/2,n=0;n<i;n++)e.push({x:s(t[2*n]),y:s(t[2*n+1])});return e},i=function(t){return["image/jsignature;base30",e(t)]};t=function(t,e,i){"string"==typeof t&&("image/jsignature;base30"===t.substring(0,23).toLowerCase()&&(t=t.substring(24)),i(n(t)))};if(null==this.jQuery)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");var a=this.jQuery.fn.jSignature;a("addPlugin","export","base30",i),a("addPlugin","export","image/jsignature;base30",i),a("addPlugin","import","base30",t),a("addPlugin","import","image/jsignature;base30",t),this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:c,compressstrokeleg:o,uncompressstrokeleg:s,compressstrokes:e,uncompressstrokes:n,charmap:h})}.call("undefined"!=typeof window?window:this),function(){function a(t,e){this.x=t,this.y=e,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var n=function(t){return Math.round(t/Math.abs(t))};this.resizeTo=function(t){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=t,this.y=t*n(this.y);else if(0===this.y)this._length=t,this.x=t*n(this.x);else{var e=Math.abs(this.y/this.x),i=Math.sqrt(Math.pow(t,2)/(1+Math.pow(e,2)));e=e*i;this._length=t,this.x=i*n(this.x),this.y=e*n(this.y)}return this},this.angleTo=function(t){var e=this.getLength()*t.getLength();return 0===e?0:Math.acos(Math.min(Math.max((this.x*t.x+this.y*t.y)/e,-1),1))/Math.PI}}function r(t,e){this.x=t,this.y=e,this.getVectorToCoordinates=function(t,e){return new a(t-this.x,e-this.y)},this.getVectorFromCoordinates=function(t,e){return this.getVectorToCoordinates(t,e).reverse()},this.getVectorToPoint=function(t){return new a(t.x-this.x,t.y-this.y)},this.getVectorFromPoint=function(t){return this.getVectorToPoint(t).reverse()}}function h(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}function s(t,e,i){e+=1;var n=new r(t.x[e-1],t.y[e-1]),s=new r(t.x[e],t.y[e]),o=(s=n.getVectorToPoint(s),new r(t.x[e-2],t.y[e-2]));return(n=o.getVectorToPoint(n)).getLength()>i?(i=2<e?new r(t.x[e-3],t.y[e-3]).getVectorToPoint(o):new a(0,0),t=.35*n.getLength(),o=n.angleTo(i.reverse()),e=s.angleTo(n.reverse()),i=new a(i.x+n.x,i.y+n.y).resizeTo(Math.max(.05,o)*t),s=new a(n.x+s.x,n.y+s.y).reverse().resizeTo(Math.max(.05,e)*t),s=new a(n.x+s.x,n.y+s.y),["c",h(i.x,2),h(i.y,2),h(s.x,2),h(s.y,2),h(n.x,2),h(n.y,2)]):["l",h(n.x,2),h(n.y,2)]}function o(t,e){var i=t.x.length-1,n=new r(t.x[i],t.y[i]);n=(s=new r(t.x[i-1],t.y[i-1])).getVectorToPoint(n);if(1<i&&n.getLength()>e){i=new r(t.x[i-2],t.y[i-2]).getVectorToPoint(s);var s=n.angleTo(i.reverse()),o=.35*n.getLength();return["c",h((i=new a(i.x+n.x,i.y+n.y).resizeTo(Math.max(.05,s)*o)).x,2),h(i.y,2),h(n.x,2),h(n.y,2),h(n.x,2),h(n.y,2)]}return["l",h(n.x,2),h(n.y,2)]}function d(t,e,i){e=["M",h(t.x[0]-e,2),h(t.y[0]-i,2)],i=1;for(var n=t.x.length-1;i<n;i++)e.push.apply(e,s(t,i,1));return 0<n?e.push.apply(e,o(t,i,1)):0===n&&e.push.apply(e,["l",1,1]),e.join(" ")}function e(t){var e,i,n=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],s=t.length,o=[],a=[],r=i=e=0,h=0,u=[];if(0!==s){for(e=0;e<s;e++){h=[],i={x:[],y:[]};var l=void 0,c=void 0;for(l=0,c=(r=t[e]).x.length;l<c;l++)h.push({x:r.x[l],y:r.y[l]});for(l=0,c=(h=simplify(h,.7,!0)).length;l<c;l++)i.x.push(h[l].x),i.y.push(h[l].y);u.push(i),o=o.concat(i.x),a=a.concat(i.y)}t=Math.min.apply(null,o)-1,s=Math.max.apply(null,o)+1,r=t<0?0:t,h=(o=Math.min.apply(null,a)-1)<0?0:o,e=s-t,i=(a=Math.max.apply(null,a)+1)-o}for(n.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+e.toString()+'" height="'+i.toString()+'">'),e=0,s=u.length;e<s;e++)i=u[e],n.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+d(i,r,h)+'"/>');return n.push("</svg>"),n.join("")}function t(t){return[l,e(t)]}function i(t){return[c,u(e(t))]}var n=window;if(("undefined"!=typeof exports?exports:n).simplify=function(t,e,i){if(e=void 0!==e?e*e:1,!i){var n,s=t.length,o=[h=t[0]];for(i=1;i<s;i++){var a=(n=t[i]).x-h.x,r=n.y-h.y;e<a*a+r*r&&(o.push(n),h=n)}h!==n&&o.push(n),t=o}o=(i=(n=t).length)-1;var h,u,l,c=[],d=[],f=[];for((s=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(i))[h=0]=s[o]=1;o;){for(r=0,a=h+1;a<o;a++){u=n[a];var p=n[h],g=n[o],v=p.x,y=p.y,m=(p=g.x-v,g.y-y),w=void 0;0===p&&0===m||(1<(w=((u.x-v)*p+(u.y-y)*m)/(p*p+m*m))?(v=g.x,y=g.y):0<w&&(v+=p*w,y+=m*w)),r<(u=(p=u.x-v)*p+(m=u.y-y)*m)&&(l=a,r=u)}e<r&&(s[l]=1,c.push(h),d.push(l),c.push(l),d.push(o)),h=c.pop(),o=d.pop()}for(a=0;a<i;a++)s[a]&&f.push(n[a]);return t=f},"function"!=typeof u)var u=function(t){var e,i,n,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),a=0,r=0,h="";for(h=[];e=(s=(e=t.charCodeAt(a++))<<16|(i=t.charCodeAt(a++))<<8|(n=t.charCodeAt(a++)))>>18&63,i=s>>12&63,n=s>>6&63,s&=63,h[r++]=o[e]+o[i]+o[n]+o[s],a<t.length;);return h=h.join(""),((t=t.length%3)?h.slice(0,t-3):h)+"===".slice(t||3)};var l="image/svg+xml",c="image/svg+xml;base64";if(void 0===T)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");(n=T.fn.jSignature)("addPlugin","export","svg",t),n("addPlugin","export",l,t),n("addPlugin","export","svgbase64",i),n("addPlugin","export",c,i)}()}(jQuery),window.ActiveXObject&&!window.CanvasRenderingContext2D&&function(){function D(t){return((t[C+"Options"]||{}).swfPath||K)+"flashcanvas.swf"}function s(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function i(t){throw new E(t)}function F(t){var e=parseInt(t.width,10),i=parseInt(t.height,10);(isNaN(e)||e<0)&&(e=300),(isNaN(i)||i<0)&&(i=150),t.width=e,t.height=i}var G=this.document,t="canvas",C="FlashCanvas",H="onreadystatechange",n;t:{n=this.document.getElementsByTagName("script");var I="",u=n.length;if(u)for(I=n[u-1].src||"";u;){if(script=n[u-1],script.src&&script.src.match("flashcanvas")){n=8<=G.documentMode?script.src:script.getAttribute("src",4);break t}u--}n=I}var K=n.replace(/[^\/]+$/,""),e=new function(t){for(var e=0,i=t.length;e<i;e++)this[t[e]]=e}("toDataURL save restore scale rotate translate transform setTransform globalAlpha globalCompositeOperation strokeStyle fillStyle createLinearGradient createRadialGradient createPattern lineWidth lineCap lineJoin miterLimit shadowOffsetX shadowOffsetY shadowBlur shadowColor clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath font textAlign textBaseline fillText strokeText measureText drawImage createImageData getImageData putImageData addColorStop direction resize".split(" ")),v={},p={},q={},x={},y={},w=function(t,e){this.canvas=t,this._swf=e,this._canvasId=e.id.slice(8),this._initialize(),this._gradientPatternId=0,this._font=this._direction="";var i=this;this._executeCommandIntervalID=setInterval(function(){for(var t=!1,e=(e=i.canvas).parentNode;e&&!t;)t=e.body,e=e.parentNode;t?0===q[i._canvasId]&&i._executeCommand():clearInterval(i._executeCommandIntervalID)},30)};w.prototype={save:function(){this._setCompositing(),this._setShadows(),this._setStrokeStyle(),this._setFillStyle(),this._setLineStyles(),this._setFontStyles(),this._stateStack.push([this._globalAlpha,this._globalCompositeOperation,this._strokeStyle,this._fillStyle,this._lineWidth,this._lineCap,this._lineJoin,this._miterLimit,this._shadowOffsetX,this._shadowOffsetY,this._shadowBlur,this._shadowColor,this._font,this._textAlign,this._textBaseline]),this._queue.push(e.save)},restore:function(){var t=this._stateStack;t.length&&(t=t.pop(),this.globalAlpha=t[0],this.globalCompositeOperation=t[1],this.strokeStyle=t[2],this.fillStyle=t[3],this.lineWidth=t[4],this.lineCap=t[5],this.lineJoin=t[6],this.miterLimit=t[7],this.shadowOffsetX=t[8],this.shadowOffsetY=t[9],this.shadowBlur=t[10],this.shadowColor=t[11],this.font=t[12],this.textAlign=t[13],this.textBaseline=t[14]),this._queue.push(e.restore)},scale:function(t,i){this._queue.push(e.scale,t,i)},rotate:function(t){this._queue.push(e.rotate,t)},translate:function(t,i){this._queue.push(e.translate,t,i)},transform:function(t,i,n,s,o,a){this._queue.push(e.transform,t,i,n,s,o,a)},setTransform:function(t,i,n,s,o,a){this._queue.push(e.setTransform,t,i,n,s,o,a)},_setCompositing:function(){var t=this._queue;this._globalAlpha!==this.globalAlpha&&(this._globalAlpha=this.globalAlpha,t.push(e.globalAlpha,this._globalAlpha)),this._globalCompositeOperation!==this.globalCompositeOperation&&(this._globalCompositeOperation=this.globalCompositeOperation,t.push(e.globalCompositeOperation,this._globalCompositeOperation))},_setStrokeStyle:function(){if(this._strokeStyle!==this.strokeStyle){var t=this._strokeStyle=this.strokeStyle;if("string"!=typeof t){if(!(t instanceof r||t instanceof z))return;t=t.id}this._queue.push(e.strokeStyle,t)}},_setFillStyle:function(){if(this._fillStyle!==this.fillStyle){var t=this._fillStyle=this.fillStyle;if("string"!=typeof t){if(!(t instanceof r||t instanceof z))return;t=t.id}this._queue.push(e.fillStyle,t)}},createLinearGradient:function(t,n,s,o){return(!isFinite(t)||!isFinite(n)||!isFinite(s)||!isFinite(o))&&i(9),this._queue.push(e.createLinearGradient,t,n,s,o),new r(this)},createRadialGradient:function(t,n,s,o,a,h){return(!isFinite(t)||!isFinite(n)||!isFinite(s)||!isFinite(o)||!isFinite(a)||!isFinite(h))&&i(9),(s<0||h<0)&&i(1),this._queue.push(e.createRadialGradient,t,n,s,o,a,h),new r(this)},createPattern:function(n,o){n||i(17);var a,r=n.tagName,h=this._canvasId;if(r)if("img"===(r=r.toLowerCase()))a=n.getAttribute("src",2);else{if(r===t||"video"===r)return;i(17)}else n.src?a=n.src:i(17);return"repeat"===o||"no-repeat"===o||"repeat-x"===o||"repeat-y"===o||""===o||null===o||i(12),this._queue.push(e.createPattern,s(a),o),!p[h][a]&&v[h]&&(this._executeCommand(),++q[h],p[h][a]=!0),new z(this)},_setLineStyles:function(){var t=this._queue;this._lineWidth!==this.lineWidth&&(this._lineWidth=this.lineWidth,t.push(e.lineWidth,this._lineWidth)),this._lineCap!==this.lineCap&&(this._lineCap=this.lineCap,t.push(e.lineCap,this._lineCap)),this._lineJoin!==this.lineJoin&&(this._lineJoin=this.lineJoin,t.push(e.lineJoin,this._lineJoin)),this._miterLimit!==this.miterLimit&&(this._miterLimit=this.miterLimit,t.push(e.miterLimit,this._miterLimit))},_setShadows:function(){var t=this._queue;this._shadowOffsetX!==this.shadowOffsetX&&(this._shadowOffsetX=this.shadowOffsetX,t.push(e.shadowOffsetX,this._shadowOffsetX)),this._shadowOffsetY!==this.shadowOffsetY&&(this._shadowOffsetY=this.shadowOffsetY,t.push(e.shadowOffsetY,this._shadowOffsetY)),this._shadowBlur!==this.shadowBlur&&(this._shadowBlur=this.shadowBlur,t.push(e.shadowBlur,this._shadowBlur)),this._shadowColor!==this.shadowColor&&(this._shadowColor=this.shadowColor,t.push(e.shadowColor,this._shadowColor))},clearRect:function(t,i,n,s){this._queue.push(e.clearRect,t,i,n,s)},fillRect:function(t,i,n,s){this._setCompositing(),this._setShadows(),this._setFillStyle(),this._queue.push(e.fillRect,t,i,n,s)},strokeRect:function(t,i,n,s){this._setCompositing(),this._setShadows(),this._setStrokeStyle(),this._setLineStyles(),this._queue.push(e.strokeRect,t,i,n,s)},beginPath:function(){this._queue.push(e.beginPath)},closePath:function(){this._queue.push(e.closePath)},moveTo:function(t,i){this._queue.push(e.moveTo,t,i)},lineTo:function(t,i){this._queue.push(e.lineTo,t,i)},quadraticCurveTo:function(t,i,n,s){this._queue.push(e.quadraticCurveTo,t,i,n,s)},bezierCurveTo:function(t,i,n,s,o,a){this._queue.push(e.bezierCurveTo,t,i,n,s,o,a)},arcTo:function(t,n,s,o,a){a<0&&isFinite(a)&&i(1),this._queue.push(e.arcTo,t,n,s,o,a)},rect:function(t,i,n,s){this._queue.push(e.rect,t,i,n,s)},arc:function(t,n,s,o,a,r){s<0&&isFinite(s)&&i(1),this._queue.push(e.arc,t,n,s,o,a,r?1:0)},fill:function(){this._setCompositing(),this._setShadows(),this._setFillStyle(),this._queue.push(e.fill)},stroke:function(){this._setCompositing(),this._setShadows(),this._setStrokeStyle(),this._setLineStyles(),this._queue.push(e.stroke)},clip:function(){this._queue.push(e.clip)},isPointInPath:function(){},_setFontStyles:function(){var t=this._queue;if(this._font!==this.font)try{var i=y[this._canvasId];i.style.font=this._font=this.font;var n=i.currentStyle,s=[n.fontStyle,n.fontWeight,i.offsetHeight,n.fontFamily].join(" ");t.push(e.font,s)}catch(o){}this._textAlign!==this.textAlign&&(this._textAlign=this.textAlign,t.push(e.textAlign,this._textAlign)),this._textBaseline!==this.textBaseline&&(this._textBaseline=this.textBaseline,t.push(e.textBaseline,this._textBaseline)),this._direction!==this.canvas.currentStyle.direction&&(this._direction=this.canvas.currentStyle.direction,t.push(e.direction,this._direction))},fillText:function(t,i,n,o){this._setCompositing(),this._setFillStyle(),this._setShadows(),this._setFontStyles(),this._queue.push(e.fillText,s(t),i,n,void 0===o?Infinity:o)},strokeText:function(t,i,n,o){this._setCompositing(),this._setStrokeStyle(),this._setShadows(),this._setFontStyles(),this._queue.push(e.strokeText,s(t),i,n,void 0===o?Infinity:o)},measureText:function(t){var e=y[this._canvasId];try{e.style.font=this.font}catch(i){}return e.innerText=t.replace(/[ \n\f\r]/g,"\t"),new L(e.offsetWidth)},drawImage:function(n,o,a,r,h,u,l,c,d){n||i(17);var f,g=n.tagName,y=arguments.length,m=this._canvasId;if(g)if("img"===(g=g.toLowerCase()))f=n.getAttribute("src",2);else{if(g===t||"video"===g)return;i(17)}else n.src?f=n.src:i(17);if(this._setCompositing(),this._setShadows(),f=s(f),3===y)this._queue.push(e.drawImage,y,f,o,a);else if(5===y)this._queue.push(e.drawImage,y,f,o,a,r,h);else{if(9!==y)return;(0===r||0===h)&&i(1),this._queue.push(e.drawImage,y,f,o,a,r,h,u,l,c,d)}!p[m][f]&&v[m]&&(this._executeCommand(),++q[m],p[m][f]=!0)},createImageData:function(){},getImageData:function(){},putImageData:function(){},loadImage:function(t,i,n){var o,a=t.tagName,r=this._canvasId;a?"img"===a.toLowerCase()&&(o=t.getAttribute("src",2)):t.src&&(o=t.src),o&&!p[r][o]&&((i||n)&&(x[r][o]=[t,i,n]),this._queue.push(e.drawImage,1,s(o)),v[r]&&(this._executeCommand(),++q[r],p[r][o]=!0))},_initialize:function(){this.globalAlpha=this._globalAlpha=1,this.globalCompositeOperation=this._globalCompositeOperation="source-over",this.fillStyle=this._fillStyle=this.strokeStyle=this._strokeStyle="#000000",this.lineWidth=this._lineWidth=1,this.lineCap=this._lineCap="butt",this.lineJoin=this._lineJoin="miter",this.miterLimit=this._miterLimit=10,this.shadowBlur=this._shadowBlur=this.shadowOffsetY=this._shadowOffsetY=this.shadowOffsetX=this._shadowOffsetX=0,this.shadowColor=this._shadowColor="rgba(0, 0, 0, 0.0)",this.font=this._font="10px sans-serif",this.textAlign=this._textAlign="start",this.textBaseline=this._textBaseline="alphabetic",this._queue=[],this._stateStack=[]},_flush:function(){var t=this._queue;return this._queue=[],t},_executeCommand:function(){var a=this._flush();if(0<a.length)try{return eval(this._swf.CallFunction('<invoke name="executeCommand" returntype="javascript"><arguments><string>'+a.join("&#0;")+"</string></arguments></invoke>"))}catch(b){}},_resize:function(t,i){this._executeCommand(),this._initialize(),0<t&&(this._swf.width=t),0<i&&(this._swf.height=i),this._queue.push(e.resize,t,i)}};var r=function(t){this._ctx=t,this.id=t._gradientPatternId++};r.prototype={addColorStop:function(t,n){(isNaN(t)||t<0||1<t)&&i(1),this._ctx._queue.push(e.addColorStop,this.id,t,n)}};var z=function(t){this.id=t._gradientPatternId++},L=function(t){this.width=t},E=function(t){this.code=t,this.message={1:"INDEX_SIZE_ERR",9:"NOT_SUPPORTED_ERR",11:"INVALID_STATE_ERR",12:"SYNTAX_ERR",17:"TYPE_MISMATCH_ERR",18:"SECURITY_ERR"}[t]};E.prototype=Error();var J="initElement",m={registeredEvents:{},canvases:{},initWindow:function(h){function s(){if("complete"===h.document.readyState){h.document.detachEvent(H,s);for(var e=h.document.getElementsByTagName(t),i=0,n=e.length;i<n;++i)m[J](e[i])}}var e=h.document;e.createElement(t),e.createStyleSheet().cssText=t+"{display:inline-block;overflow:hidden;width:300px;height:150px}";var u=this.canvases,l=this.registeredEvents,c=function(){var t,e,i,n,s,o,a;for(a in h.detachEvent("onunload",c),u)if(e=(t=u[a]).firstChild,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView:t.ownerDocument.parentWindow,h===n){for(i in e)"function"==typeof e[i]&&(e[i]=null);for(i in t)"function"==typeof t[i]&&(t[i]=null);for(n=0,s=l[a].length;n!==s;n++)o=l[a][n],e.detachEvent(o[0],o[1]),t.detachEvent(o[0],o[1])}h.CanvasRenderingContext2D=null,h.CanvasGradient=null,h.CanvasPattern=null,h[C]=null};h.attachEvent("onunload",c),h.CanvasRenderingContext2D=w,h.CanvasGradient=r,h.CanvasPattern=z,h[C]=m;var i=D(h);0===i.indexOf(h.location.protocol+"//"+h.location.host+"/")&&h.setTimeout(function(){var t=new ActiveXObject("Microsoft.XMLHTTP");t.open("GET",i,!1),t.send(null)},0),"complete"===h.document.readyState?s():h.document.attachEvent(H,s)}};m[J]=function(t){if(t.getContext)return t;var i=t.ownerDocument,n=i.defaultView?i.defaultView:i.parentWindow;n.CanvasRenderingContext2D||this.initWindow(n);var s=Math.random().toString(36).slice(2)||"0",o="external"+s;v[s]=!1,p[s]={},q[s]=1,x[s]={},this.registeredEvents[s]=[],F(t);var a=D(n);t.innerHTML='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+("https:"===n.location.protocol?"https:":"http:")+'//fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%" id="'+o+'"><param name="allowScriptAccess" value="always"><param name="flashvars" value="id='+o+'"><param name="wmode" value="transparent"></object><span style="margin:0;padding:0;border:0;display:inline-block;position:static;height:1em;overflow:visible;white-space:nowrap"></span>';var r=(this.canvases[s]=t).firstChild;y[s]=t.lastChild;var h=i.body.contains;if(h(t))r.movie=a;else var u=n.setInterval(function(){h(t)&&(n.clearInterval(u),r.movie=a)},2);"BackCompat"!==i.compatMode&&n.XMLHttpRequest||(y[s].style.overflow="hidden");var l=new w(t,r);return t.getContext=function(t){return"2d"===t?l:null},t.toDataURL=function(t,i){return"image/jpeg"===(""+t).toLowerCase()?l._queue.push(e.toDataURL,t,"number"==typeof i?i:""):l._queue.push(e.toDataURL,t),l._executeCommand()},i=function(t){var e=(t=t?t.srcElement:n.event.srcElement).parentNode;t.blur(),e.focus()},this.registeredEvents[s].push(["onfocus",i]),r.attachEvent("onfocus",i),t},m.saveImage=function(t){t.firstChild.saveImage()},m.setOptions=function(){},m.trigger=function(t,e){this.canvases[t].fireEvent("on"+e)},m.unlock=function(t,e,i){try{var s,o,a,r,h,u,l,c,d;void 0===e?(o=(s=this.canvases[t]).firstChild,c=s.ownerDocument,d=c.defaultView?c.defaultView:c.parentWindow,F(s),a=s.width,r=s.height,s.style.width=a+"px",s.style.height=r+"px",0<a&&(o.width=a),0<r&&(o.height=r),o.resize(a,r),e=function(t){var e=(t=t||d.event).propertyName;if("width"===e||"height"===e){var i=(t=t.srcElement)[e],n=parseInt(i,10);(isNaN(n)||n<0)&&(n="width"===e?300:150),i===n?(t.style[e]=n+"px",t.getContext("2d")._resize(t.width,t.height)):t[e]=n}},this.registeredEvents[t].push(["onpropertychange",e]),s.attachEvent("onpropertychange",e),v[t]=!0,"function"==typeof s.onload&&d.setTimeout(function(){s.onload()},0)):(h=x[t][e])&&(u=h[0],l=h[1+i],delete x[t][e],"function"==typeof l&&l.call(u)),q[t]&&--q[t]}catch(n){throw console.log("Call to FlashCanvas.unlock had thrown an error: ",n.message),n}},m.initWindow(this,G),keep=[w.measureText,w.loadImage]}.call(window);